(()=>{"use strict";(new class{constructor(){this.randomItemNumber=0,this.intervalId=null,this.countPoints=0,this.countMissing=0}init(){this.field=Array.from(document.querySelectorAll(".field-item")),this.newGameBtn=document.getElementById("start-game"),this.stopGameBtn=document.getElementById("stop-game"),this.fieldList=document.getElementById("field-list"),this.gameOverDiv=document.getElementById("game-over-id"),this.spanCountPoints=document.getElementById("count-points"),this.spanCountMissing=document.getElementById("count-missing"),this.gamePointsFunc=this.gamePoints.bind(this),this.newGameBtn.addEventListener("click",(()=>this.startGame())),this.stopGameBtn.addEventListener("click",(()=>this.stopGame())),this.fieldList.addEventListener("pointerdown",(t=>this.hammerDown(t))),this.fieldList.addEventListener("pointerup",(t=>this.hammerUp(t)))}checkGameOver(){return 5===this.countMissing&&(this.removeGoblin(),this.stopGame(),this.gameOverDiv.classList.add("display"),!0)}countsClear(){this.countPoints=0,this.countMissing=0,this.spanCountPoints.textContent=this.countPoints,this.spanCountMissing.textContent=this.countMissing}hammerDown(){this.fieldList.classList.add("hummer-bang")}hammerUp(){this.fieldList.classList.remove("hummer-bang")}gamePoints(t){const i=t.target.closest("div.field-item.field-item-img");if(!i)return this.missingGoblin(),void this.checkGameOver();this.countPoints+=1,this.spanCountPoints.textContent=this.countPoints,i.classList.remove("field-item-img")}getRandom(t,i){const e=Math.floor(Math.random()*t);return e===i?this.getRandom(t,i):e}missingGoblin(){this.countMissing+=1,this.spanCountMissing.textContent=this.countMissing}generateGoblin(){this.randomItemNumber=this.getRandom(this.field.length,this.randomItemNumber),this.field[this.randomItemNumber].classList.add("field-item-img")}removeGoblin(){const t=this.field.findIndex((t=>t.classList.contains("field-item-img")));-1!==t&&this.field[t].classList.remove("field-item-img")}startGame(){this.fieldList.addEventListener("click",this.gamePointsFunc),this.gameOverDiv.classList.remove("display"),this.stopGameBtn.disabled=!1,this.newGameBtn.disabled=!0,this.generateGoblin(),this.intervalId=setInterval((()=>{this.stepGame()}),1e3)}stepGame(){-1===this.field.findIndex((t=>t.classList.contains("field-item-img")))?this.generateGoblin():(this.removeGoblin(),this.missingGoblin(),this.checkGameOver()||this.generateGoblin())}stopGame(){this.removeGoblin(),clearInterval(this.intervalId),this.fieldList.removeEventListener("click",this.gamePointsFunc),this.countsClear(),this.stopGameBtn.disabled=!0,this.newGameBtn.disabled=!1}}).init()})();